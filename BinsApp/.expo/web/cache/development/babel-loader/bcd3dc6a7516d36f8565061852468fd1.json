{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/bobbytatum/Desktop/BinsApp/BinsApp/components/LoginProvider.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { createContext, useState } from 'react';\nimport { Auth } from 'aws-amplify';\nexport var LoginContext = createContext();\nexport var LoginProvider = function (_React$Component) {\n  _inherits(LoginProvider, _React$Component);\n\n  var _super = _createSuper(LoginProvider);\n\n  function LoginProvider(props) {\n    var _this;\n\n    _classCallCheck(this, LoginProvider);\n\n    _this = _super.call(this, props);\n\n    _this.login = function (email, password) {\n      return new Promise(function (resolve, reject) {\n        Auth.signIn({\n          username: email,\n          password: password\n        }).then(function () {\n          _this.setState({\n            isLoggedIn: true\n          });\n\n          resolve('Successful Sign In');\n        }).catch(function (err) {\n          return reject('Error Signing In: ' + err);\n        });\n      });\n    };\n\n    _this.logout = function () {\n      return new Promise(function (resolve, reject) {\n        console.log('login state before signout: ' + _this.state.isLoggedIn);\n        Auth.signOut().then(function () {\n          _this.setState({\n            isLoggedIn: false\n          });\n\n          console.log('login state after logout: ' + _this.state.isLoggedIn);\n          resolve('successful sign out');\n        }).catch(function (err) {\n          return reject('error signing out!');\n        });\n      });\n    };\n\n    _this.signup = function (email, password, name, phone_num, address) {\n      return new Promise(function (resolve, reject) {\n        console.log('signing up!');\n        Auth.signUp({\n          username: email,\n          password: password,\n          attributes: {\n            name: name,\n            phone_number: phone_num,\n            address: address\n          }\n        }).then(function () {\n          resolve('Successful Sign Up');\n        }).catch(function (err) {\n          return reject(err);\n        });\n      });\n    };\n\n    _this.completeSignup = function (specialInstructions) {\n      return new Promise(function (resolve, reject) {\n        console.log(specialInstructions);\n\n        _this.setState({\n          isLoggedIn: true\n        });\n\n        resolve('successful sign up completed.');\n      });\n    };\n\n    _this.state = {\n      isLoggedIn: false\n    };\n    return _this;\n  }\n\n  _createClass(LoginProvider, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(LoginContext.Provider, {\n        value: _objectSpread(_objectSpread({}, this.state), {}, {\n          login: this.login,\n          logout: this.logout,\n          signup: this.signup,\n          completeSignup: this.completeSignup\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }\n      }, this.props.children);\n    }\n  }]);\n\n  return LoginProvider;\n}(React.Component);","map":{"version":3,"sources":["/Users/bobbytatum/Desktop/BinsApp/BinsApp/components/LoginProvider.js"],"names":["React","createContext","useState","Auth","LoginContext","LoginProvider","props","login","email","password","Promise","resolve","reject","signIn","username","then","setState","isLoggedIn","catch","err","logout","console","log","state","signOut","signup","name","phone_num","address","signUp","attributes","phone_number","completeSignup","specialInstructions","children","Component"],"mappings":"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","sourcesContent":["import React, {createContext, useState} from 'react';\nimport { Auth } from 'aws-amplify';\n\n// for login/signup context\nexport const LoginContext = createContext();\n\nexport class LoginProvider extends React.Component{\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isLoggedIn: false,\n        };\n    }\n\n    /*\n     * Login Promise\n     * To login a user via AWS Amplify. Also changes isLoggedIn boolean, which \n     * conditionally renders appropriate screens (pending state).\n     * \n     * @param email: string of user email\n     * @param password: string of user password\n     * @return Promise\n     */ \n    login = (email, password) => {\n        return new Promise((resolve, reject) => {\n            Auth.signIn({\n                username: email,\n                password: password,\n            })\n            .then(() => {\n                this.setState({isLoggedIn: true});\n                resolve('Successful Sign In');\n            })\n            .catch(err => reject('Error Signing In: ' + err));\n        });\n    }\n\n    /*\n     * Logout Promise\n     * To log a user out via AWS Amplify. Also changes isLoggedIn boolean, which forces user back\n     * to Landing page.\n     * \n     * @return Promise\n     */\n    logout = () => {\n        return new Promise((resolve, reject) => {\n            console.log('login state before signout: ' + this.state.isLoggedIn);\n            Auth.signOut()\n            .then(() => {\n                this.setState({isLoggedIn: false});\n                console.log('login state after logout: ' + this.state.isLoggedIn);\n                resolve('successful sign out');\n            })\n            .catch(err => reject('error signing out!'));\n        });\n    }\n\n    /*\n     * Signup Promise\n     * Registers a user via AWS Amplify. Also changes the isLoggedIn boolean to\n     * force the user to the Home Page. TODO arg check in login page? or here? A thought - before new Promise, can check for input validation and return Alert if invalid. \n     * Note that Auth.signUp may force errors so they need to be checked here too.\n     * \n     * @param email: The user's email as a string\n     * @param password: The user's password as a string\n     * @param name: The user's name as a string\n     * @param phone_num: The user's phone num (what type is amplify looking for?)\n     * @param address: The user's address as a string, fields separated by a space\n     * @return Promise (for now only a promise, potentially Error obj in future)\n     */ \n    signup = (email, password, name, phone_num, address) => {\n        return new Promise((resolve, reject) => {\n            console.log('signing up!');\n            Auth.signUp({\n                username: email,\n                password: password,\n                attributes: {\n                  name: name,\n                  phone_number: phone_num,\n                  address: address,\n                },\n            })\n            .then(() => {\n                resolve('Successful Sign Up');\n            })\n            .catch(err => reject(err));\n        });\n    }\n\n    completeSignup = (specialInstructions) => {\n        return new Promise((resolve, reject) => {\n            console.log(specialInstructions)\n            this.setState({isLoggedIn: true});\n            resolve('successful sign up completed.');\n        });\n    }\n\n    render() {\n        return (\n            <LoginContext.Provider value={{...this.state, login: this.login, logout: this.logout, signup: this.signup, completeSignup: this.completeSignup}}>\n                {this.props.children}\n            </LoginContext.Provider>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}